ONH Expert Connector — Concept Summary (for Codex)

Purpose
- Help ONH teachers quickly find internal staff whose existing public profiles and publications match a course/topic/material.
- Output: names of relevant staff + concrete, evidence-based reasons (with links). No email templates or collaboration suggestions.

Users & Access
- Teacher: the only user. Uses the app with NO login.
- Admin: edits a simple staff list file in the codebase (staff.yaml). No UI for admins.
- Researchers/experts: do nothing in this app. The app only reads what they already publish publicly.

Inputs (Teacher)
- Topic text (one or more paragraphs describing course/material).
- Optional files: syllabus, slides, reading list (PDF/DOCX/PPTX/TXT/MD).
- Optional filter: department (campus and language are NOT used).

Outputs (Teacher)
- Ranked list of staff candidates (name + department).
- “Why matched” explanation: 2–4 sentences grounded in specific sentences/titles from their public profile or publication pages.
- Source links for each explanation.
- Shortlist function and export (PDF/JSON). No messaging or email generation.

Data Sources
- A single config file (staff.yaml) maintained in the repo by an admin. For each staff member:
  - name, department
  - profile_url
  - sources: array of allowed public URLs to fetch (e.g., ONH profile page, publication pages, ORCID/Scholar pages if public)
  - tags: list of expertise keywords (free text)
- No continuous syncing. Pages are fetched “just in time” when a teacher runs a search.
- Optional lightweight local cache of fetched text/snippets for faster repeat use.

Matching Approach (Lightweight)
- Extract text from teacher input (and uploaded files) and produce topic keywords + an embedding vector.
- For each staff member’s sources: fetch the page content (title, headings, and first N KB of body), then keep short text snippets.
- Hybrid retrieval: BM25 (keyword match) + vector similarity (embeddings).
- Simple re-ranking: semantic score + tag overlap + department preference (if set). Apply a small diversity nudge to avoid only one subgroup.
- Explanations are generated by a small local LLM but constrained to retrieved snippets (no hallucinations). Always show the links.

UI Flow (Minimal)
1) Home
   - Text box for topic; file upload; Department filter dropdown.
   - Button: “Find matches”.
2) Review Themes
   - Shows extracted topic chips (editable). Button: “Search experts”.
3) Results
   - 5–10 cards: Name, Department, Why matched (+ links), Add to shortlist.
   - Left-side filters: Department only.
4) Shortlist
   - View, reorder, add notes. Export PDF/JSON.

Non-Goals (Deliberate Omissions)
- No user accounts or logins.
- No researcher/admin dashboards.
- No campus or language filter.
- No “include methods experts” toggle.
- No email/message generation or outreach suggestions.

ONH-Specific Notes
- Tailored to Oslo Nye Høyskole, which publicly lists staff and research. The app relies on those public pages.
- Department filter retained to reflect ONH’s multiple disciplines (e.g., psychology, health, business/society).
- Language handling: mixed Norwegian/English texts are acceptable; we prioritize robust basic matching over language-specific features in the MVP.

Local Prototype & Models (RTX 4070 Friendly)
- Run locally on a machine with NVIDIA RTX 4070 (12 GB VRAM typical).
- LLM for explanations: small instruction-tuned model, e.g. Llama 3.2 3B Instruct (Q4) or Mistral 7B Instruct (Q4) via Ollama/llama.cpp.
- Embeddings: bge-small-en-v1.5 or all-MiniLM-L6-v2 (CPU or GPU).
- Vector store: FAISS; keyword search: simple BM25 (e.g., rank_bm25).
- Model swapping via models.yaml (change model name/quantization and restart).

Security & Privacy
- Local-only by default (binds to localhost unless configured).
- Strict fetch allowlist: only the URLs listed per staff entry are fetched; no crawling beyond these.
- Upload hygiene: block executables/macros, limit file types/size, antivirus scan.
- No student data: warn/block if detected.
- Store only minimal snippets/embeddings; set a cache retention window.

Config Files (Editable by Admin)
- staff.yaml: staff entries with profile URL(s), allowed source URLs, department, tags.
- models.yaml: model choices and quantization settings.
- app.config.yaml: limits (max sources/pages per staff, max KB per page, cache size, language options, export settings).

MVP Scope
- File/text parsing.
- Theme extraction (keywords + embeddings).
- Just-in-time fetch from staff sources (with allowlist).
- Hybrid retrieval + simple re-ranking.
- Grounded, linked explanations.
- Results UI (cards, filter) + shortlist/export.
- No database; everything file/config-driven.

High-Level Endpoints (if building a small web service)
- POST /analyze-topic : accepts text + files; returns extracted themes.
- POST /match : accepts themes + optional department; performs fetch+match and returns ranked candidates with explanations + links.
- GET  /shortlist : returns saved shortlist (local session or file).
- POST /shortlist : saves/updates shortlist.
- GET  /config   : returns basic app settings (read-only for UI).

Success Criteria
- A teacher can paste a topic (or upload a syllabus), pick a department filter if needed, and receive a short ranked list of ONH colleagues with clear “why matched” reasons and links.
- Runs entirely on a local 4070 with small models.
- No logins. No researcher/admin UI. Admins only edit staff.yaml/models.yaml/app.config.yaml.
